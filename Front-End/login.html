<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Login</title>
    <link rel="stylesheet" href="Css/Style.css">
</head>
<body onload="renderNavbar()">
    <div id="navbar"></div>
    <div style="max-width:400px; margin:50px auto;">
        <h2>Admin Login</h2>
        <p id="error" style="color:red;"></p>
        <form id="loginForm">
            <input type="text" id="username" placeholder="Username" required><br><br>
            <input type="password" id="password" placeholder="Password" required><br><br>
            <button type="submit">Login</button>
        </form>
    </div>

    <script src="Js/Api/api.js"></script>
    <script src="Js/Main.js"></script>
    <script>
        const form = document.getElementById("loginForm");
        form.addEventListener("submit", async e => {
            e.preventDefault();
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const error = document.getElementById("error");

            try {
                const res = await AdminAPI.login(username, password);
                if(res.isAdmin){
                    setAdminLoggedIn(res);
                    window.location.href = "admin.html";
                } else {
                    error.textContent = "Invalid credentials";
                }
            } catch(err) {
                error.textContent = "Login failed. Check username/password.";
            }
        });
    </script>
</body>
</html>
